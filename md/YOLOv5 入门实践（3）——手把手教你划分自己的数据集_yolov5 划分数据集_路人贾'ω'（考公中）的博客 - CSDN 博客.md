> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [blog.csdn.net](https://blog.csdn.net/weixin_43334693/article/details/130025866?spm=1001.2014.3001.5501)

#### ![](https://img-blog.csdnimg.cn/1bf8a03fddd1469987acea9250895fd7.gif)

### ![](https://img-blog.csdnimg.cn/989a8ec219c4476ea1a9b4048128e5c6.jpeg)

å‰è¨€
--

ä¸Šä¸€ç¯‡æˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•åˆ©ç”¨ [labelimg](https://so.csdn.net/so/search?q=labelimg&spm=1001.2101.3001.7020) æ ‡æ³¨è‡ªå·±çš„æ•°æ®é›†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è¯¥å¯¹è¿™äº›æ•°æ®é›†è¿›è¡Œåˆ’åˆ†äº†ã€‚é¢å¯¹ç¹æ‚çš„æ•°æ®é›†ï¼Œå¦‚æœæ‰‹åŠ¨åˆ’åˆ†çš„è¯ä¸ä»…éº»çƒ¦è€Œä¸”ä¸èƒ½ä¿è¯éšæœºæ€§ã€‚æœ¬ç¯‡æ–‡ç« å°±æ¥æ‰‹æŠŠæ‰‹æ•™ä½ åˆ©ç”¨ä»£ç ï¼Œè‡ªåŠ¨å°†è‡ªå·±çš„æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ã€‚ä¸€èµ·æ¥å­¦ä¹ å§ï¼

![](https://img-blog.csdnimg.cn/233127243a2d4ad0a367bf353465ae21.gif)

**å‰æœŸå›é¡¾ï¼š**

Â [YOLOv5 å…¥é—¨å®è·µï¼ˆ1ï¼‰â€”â€”æ‰‹æŠŠæ‰‹å¸¦ä½ ç¯å¢ƒé…ç½®æ­å»º](https://blog.csdn.net/weixin_43334693/article/details/129981848?spm=1001.2014.3001.5501 "YOLOv5å…¥é—¨å®è·µï¼ˆ1ï¼‰â€”â€”æ‰‹æŠŠæ‰‹å¸¦ä½ ç¯å¢ƒé…ç½®æ­å»º")

[YOLOv5 å…¥é—¨å®è·µï¼ˆ2ï¼‰â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ åˆ©ç”¨ labelimg æ ‡æ³¨æ•°æ®é›†](https://blog.csdn.net/weixin_43334693/article/details/129995604?spm=1001.2014.3001.5501 "YOLOv5å…¥é—¨å®è·µï¼ˆ2ï¼‰â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ åˆ©ç”¨labelimgæ ‡æ³¨æ•°æ®é›†")

![](https://img-blog.csdnimg.cn/962f7cb1b48f44e29d9beb1d499d0530.gif)â€‹Â  Â ğŸ€**æœ¬äºº [YOLOv5 æºç ](https://so.csdn.net/so/search?q=YOLOv5%E6%BA%90%E7%A0%81&spm=1001.2101.3001.7020 "YOLOv5æºç ")è¯¦è§£ç³»åˆ—ï¼š**Â Â 

[YOLOv5 æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ1ï¼‰â€”â€”é¡¹ç›®ç›®å½•ç»“æ„è§£æ](https://blog.csdn.net/weixin_43334693/article/details/129356033?spm=1001.2014.3001.5501 "YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ1ï¼‰â€”â€”é¡¹ç›®ç›®å½•ç»“æ„è§£æ")

[â€‹â€‹â€‹â€‹â€‹â€‹YOLOv5 æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ2ï¼‰â€”â€”æ¨ç†éƒ¨åˆ† detect.py](https://blog.csdn.net/weixin_43334693/article/details/129349094?spm=1001.2014.3001.5501 "â€‹â€‹â€‹â€‹â€‹â€‹YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ2ï¼‰â€”â€”æ¨ç†éƒ¨åˆ†detect.py")

[YOLOv5 æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ3ï¼‰â€”â€”è®­ç»ƒéƒ¨åˆ† train.py](https://blog.csdn.net/weixin_43334693/article/details/129460666?spm=1001.2014.3001.5501 "YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ3ï¼‰â€”â€”è®­ç»ƒéƒ¨åˆ†train.py")

[YOLOv5 æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ4ï¼‰â€”â€”éªŒè¯éƒ¨åˆ† valï¼ˆtestï¼‰.py](https://blog.csdn.net/weixin_43334693/article/details/129649553?spm=1001.2014.3001.5501 "YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ4ï¼‰â€”â€”éªŒè¯éƒ¨åˆ†valï¼ˆtestï¼‰.py")

[YOLOv5 æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ5ï¼‰â€”â€”é…ç½®æ–‡ä»¶ yolov5s.yaml](https://blog.csdn.net/weixin_43334693/article/details/129697521?spm=1001.2014.3001.5501 "YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ5ï¼‰â€”â€”é…ç½®æ–‡ä»¶yolov5s.yaml")

[YOLOv5 æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ6ï¼‰â€”â€”ç½‘ç»œç»“æ„ï¼ˆ1ï¼‰yolo.py](https://blog.csdn.net/weixin_43334693/article/details/129803802?spm=1001.2014.3001.5501 "YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ6ï¼‰â€”â€”ç½‘ç»œç»“æ„ï¼ˆ1ï¼‰yolo.py")

[YOLOv5 æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ7ï¼‰â€”â€”ç½‘ç»œç»“æ„ï¼ˆ2ï¼‰common.py](https://blog.csdn.net/weixin_43334693/article/details/129854764?spm=1001.2014.3001.5501 "YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ7ï¼‰â€”â€”ç½‘ç»œç»“æ„ï¼ˆ2ï¼‰common.py")

**ç›®å½•**

[å‰è¨€](#%E5%89%8D%E8%A8%80)

[ä¸€ã€è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€éªŒè¯é›†ä»‹ç»](#%E4%B8%80%E3%80%81%E8%AE%AD%E7%BB%83%E9%9B%86%E3%80%81%E6%B5%8B%E8%AF%95%E9%9B%86%E3%80%81%E9%AA%8C%E8%AF%81%E9%9B%86%E4%BB%8B%E7%BB%8D)

[äºŒã€å‡†å¤‡è‡ªå·±çš„æ•°æ®é›†](#%E4%BA%8C%E3%80%81%E5%87%86%E5%A4%87%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86)

[ä¸‰ã€åˆ’åˆ†çš„ä»£ç åŠè®²è§£](#%C2%A0%E4%B8%89%E3%80%81%E5%88%92%E5%88%86%E7%9A%84%E4%BB%A3%E7%A0%81%E5%8F%8A%E8%AE%B2%E8%A7%A3)

![](https://img-blog.csdnimg.cn/58a2da161ad743d8b8735de5bd142014.gif)

ä¸€ã€è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€[éªŒè¯é›†](https://so.csdn.net/so/search?q=%E9%AA%8C%E8%AF%81%E9%9B%86&spm=1001.2101.3001.7020)ä»‹ç»
------------------------------------------------------------------------------------------------------

æˆ‘ä»¬é€šå¸¸æŠŠè®­ç»ƒçš„æ•°æ®åˆ†ä¸ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š**è®­ç»ƒé›†ã€æµ‹è¯•é›†å’ŒéªŒè¯é›†**ã€‚

æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªæ —å­ï¼šæ¨¡å‹çš„è®­ç»ƒä¸å­¦ä¹ ï¼Œç±»ä¼¼äºè€å¸ˆæ•™å­¦ç”Ÿå­¦çŸ¥è¯†çš„è¿‡ç¨‹ã€‚

*   **1ã€è®­ç»ƒé›†ï¼ˆtrain setï¼‰ï¼š**ç”¨äº**è®­ç»ƒæ¨¡å‹ä»¥åŠç¡®å®šå‚æ•°**ã€‚ç›¸å½“äºè€å¸ˆæ•™å­¦ç”ŸçŸ¥è¯†çš„è¿‡ç¨‹ã€‚
*   **2ã€éªŒè¯é›†ï¼ˆvalidation setï¼‰ï¼š**ç”¨äº**ç¡®å®šç½‘ç»œç»“æ„ä»¥åŠè°ƒæ•´æ¨¡å‹çš„è¶…å‚æ•°**ã€‚ç›¸å½“äºæœˆè€ƒç­‰å°æµ‹éªŒï¼Œç”¨äºå­¦ç”Ÿå¯¹å­¦ä¹ çš„æŸ¥æ¼è¡¥ç¼ºã€‚
*   **3ã€æµ‹è¯•é›†ï¼ˆtest setï¼‰ï¼š**ç”¨äº**æ£€éªŒæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›**ã€‚ç›¸å½“äºå¤§è€ƒï¼Œä¸Šæˆ˜åœºä¸€æ ·ï¼ŒçœŸæ­£çš„å»æ£€éªŒå­¦ç”Ÿçš„å­¦ä¹ æ•ˆæœã€‚

> **å‚æ•°ï¼ˆparametersï¼‰ï¼š**æŒ‡ç”±æ¨¡å‹é€šè¿‡å­¦ä¹ å¾—åˆ°çš„å˜é‡ï¼Œå¦‚æƒé‡å’Œåç½®ã€‚

> **è¶…å‚æ•°ï¼ˆhyperparametersï¼‰ï¼š**æŒ‡æ ¹æ®ç»éªŒè¿›è¡Œè®¾å®šçš„å‚æ•°ï¼Œå¦‚è¿­ä»£æ¬¡æ•°ï¼Œéšå±‚çš„å±‚æ•°ï¼Œæ¯å±‚ç¥ç»å…ƒçš„ä¸ªæ•°ï¼Œå­¦ä¹ ç‡ç­‰ã€‚

![](https://img-blog.csdnimg.cn/c3c37c4064974a2e80dcf4562ae12c1e.png)

äºŒã€å‡†å¤‡è‡ªå·±çš„æ•°æ®é›†
----------

**ç¬¬ 1 æ­¥ï¼šåœ¨ YOLOv5 é¡¹ç›®ä¸‹åˆ›å»ºå¯¹åº”æ–‡ä»¶å¤¹**

åœ¨ YOLOv5 é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º **datasets æ–‡ä»¶å¤¹**ï¼ˆåå­—è‡ªå®šä¹‰ï¼‰ï¼Œæ¥ç€åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º **Annotations** å’Œ **images** **æ–‡ä»¶å¤¹ã€‚**

*   **Annotationsï¼š**å­˜æ”¾æ ‡æ³¨çš„æ ‡ç­¾æ–‡ä»¶
*   **imagesï¼š**å­˜æ”¾éœ€è¦æ‰“æ ‡ç­¾çš„å›¾ç‰‡æ–‡ä»¶

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šÂ 

![](https://img-blog.csdnimg.cn/d7e1c690a8e24881b7eb2fbf2729159f.png)

Â **ç¬¬ 2 æ­¥ï¼šæ‰“å¼€ labelimg å¼€å§‹æ ‡æ³¨æ•°æ®é›†**

ä½¿ç”¨æ•™ç¨‹å¯ä»¥çœ‹æˆ‘çš„ä¸Šä¸€ç¯‡ä»‹ç»ï¼š [YOLOv5 å…¥é—¨å®è·µï¼ˆ2ï¼‰â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ åˆ©ç”¨ labelimg æ ‡æ³¨æ•°æ®é›†](https://blog.csdn.net/weixin_43334693/article/details/129995604?spm=1001.2014.3001.5501 "Â YOLOv5å…¥é—¨å®è·µï¼ˆ2ï¼‰â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ åˆ©ç”¨labelimgæ ‡æ³¨æ•°æ®é›†")

æ ‡æ³¨å **Annotations æ–‡ä»¶å¤¹**ä¸‹é¢ä¸º xml æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://img-blog.csdnimg.cn/546910e49f3949a88ff751f9831f87c8.png)

 **images æ–‡ä»¶å¤¹**æ˜¯æˆ‘ä»¬çš„æ•°æ®é›†å›¾ç‰‡ï¼Œæ ¼å¼ä¸º jpgï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šÂ ![](https://img-blog.csdnimg.cn/24d94e63b33743f38de229c22405e26e.png)

**ç¬¬ 3 æ­¥ï¼šåˆ›å»ºä¿å­˜åˆ’åˆ†åæ•°æ®é›†çš„æ–‡ä»¶å¤¹**

åˆ›å»ºä¸€ä¸ªåä¸º **ImageSets çš„æ–‡ä»¶å¤¹**ï¼ˆåå­—è‡ªå®šä¹‰ï¼‰ï¼Œç”¨æ¥ä¿å­˜ä¸€ä¼šå„¿åˆ’åˆ†å¥½çš„è®­ç»ƒé›†ã€æµ‹è¯•é›†å’ŒéªŒè¯é›†ã€‚

![](https://img-blog.csdnimg.cn/9f2b4dafef2040ba84bea9abfe60b465.png)

>  **å‡†å¤‡å·¥ä½œçš„æ³¨æ„äº‹é¡¹ï¼š**
> 
> *   æ‰€æœ‰è®­ç»ƒæ‰€éœ€çš„å›¾åƒå­˜äºä¸€ä¸ªç›®å½•ï¼Œæ‰€æœ‰è®­ç»ƒæ‰€éœ€çš„æ ‡ç­¾å­˜äºä¸€ä¸ªç›®å½•ã€‚
> *   å›¾åƒæ–‡ä»¶ä¸æ ‡ç­¾æ–‡ä»¶éƒ½ç»Ÿä¸€çš„æ ¼å¼ã€‚
> *   å›¾åƒåä¸æ ‡ç­¾åä¸€ä¸€å¯¹åº”ã€‚

ä¸‰ã€åˆ’åˆ†çš„ä»£ç åŠè®²è§£
----------

å®Œæˆä»¥ä¸Šå·¥ä½œæˆ‘ä»¬å°±å¯ä»¥æ¥è¿›è¡Œæ•°æ®é›†çš„åˆ’åˆ†å•¦ï¼

**ç¬¬ 1 æ­¥ï¼šåˆ›å»º split.py** 

åœ¨ YOLOv5 é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º split.py é¡¹ç›®ã€‚

![](https://img-blog.csdnimg.cn/43186ecef51c4280854e08583a036ce2.png)

**ç¬¬ 2 æ­¥ï¼šå°†æ•°æ®é›†æ‰“ä¹±é¡ºåº**

é€šè¿‡ä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼Œæ•°æ®é›†æœ‰ **images** å’Œ **Annotations** è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶ç»‘å®šï¼Œç„¶åå°†å…¶æ‰“ä¹±é¡ºåºã€‚  
é¦–å…ˆè®¾ç½®ç©ºåˆ—è¡¨ï¼Œå°† for å¾ªç¯è¯»å–è¿™ä¸¤ä¸ªæ–‡ä»¶çš„æ¯ä¸ªæ•°æ®æ”¾å…¥å¯¹åº”è¡¨ä¸­ï¼Œå†å°†è¿™ä¸¤ä¸ªæ–‡ä»¶é€šè¿‡ **zipï¼ˆï¼‰å‡½æ•°**ç»‘å®šï¼Œè®¡ç®—æ€»é•¿åº¦ã€‚

```
def split_data(file_path,xml_path, new_file_path, train_rate, val_rate, test_rate):
    each_class_image = []
    each_class_label = []
    for image in os.listdir(file_path):
        each_class_image.append(image)
    for label in os.listdir(xml_path):
        each_class_label.append(label)
    data=list(zip(each_class_image,each_class_label))
    total = len(each_class_image)
```

ç„¶åç”¨ **random.shuffleï¼ˆï¼‰å‡½æ•°**æ‰“ä¹±é¡ºåºï¼Œå†å°†ä¸¤ä¸ªåˆ—è¡¨è§£ç»‘ã€‚

```
random.shuffle(data)
    each_class_image,each_class_label=zip(*data)
```

**ç¬¬ 3 æ­¥ï¼šæŒ‰ç…§ç¡®å®šå¥½çš„æ¯”ä¾‹å°†ä¸¤ä¸ªåˆ—è¡¨å…ƒç´ åˆ†å‰²**

åˆ†åˆ«è·å– **trainã€valã€test** è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹å¯¹åº”çš„å›¾ç‰‡å’Œæ ‡ç­¾ã€‚

```
train_images = each_class_image[0:int(train_rate * total)]
    val_images = each_class_image[int(train_rate * total):int((train_rate + val_rate) * total)]
    test_images = each_class_image[int((train_rate + val_rate) * total):]
    train_labels = each_class_label[0:int(train_rate * total)]
    val_labels = each_class_label[int(train_rate * total):int((train_rate + val_rate) * total)]
    test_labels = each_class_label[int((train_rate + val_rate) * total):]
```

**ç¬¬ 4 æ­¥ï¼šåœ¨æœ¬åœ°ç”Ÿæˆæ–‡ä»¶å¤¹ï¼Œå°†åˆ’åˆ†å¥½çš„æ•°æ®é›†åˆ†åˆ«ä¿å­˜**

æ¥ä¸‹æ¥å°±æ˜¯è®¾ç½®ç›¸åº”çš„è·¯å¾„ä¿å­˜æ ¼å¼ï¼Œå°†å›¾ç‰‡å’Œæ ‡ç­¾å¯¹åº”ä¿å­˜ä¸‹æ¥ã€‚

```
for image in train_images:
        print(image)
        old_path = file_path + '/' + image
        new_path1 = new_file_path + '/' + 'train' + '/' + 'images'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + image
        shutil.copy(old_path, new_path)
 
    for label in train_labels:
        print(label)
        old_path = xml_path + '/' + label
        new_path1 = new_file_path + '/' + 'train' + '/' + 'labels'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + label
        shutil.copy(old_path, new_path)
 
    for image in val_images:
        old_path = file_path + '/' + image
        new_path1 = new_file_path + '/' + 'val' + '/' + 'images'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + image
        shutil.copy(old_path, new_path)
 
    for label in val_labels:
        old_path = xml_path + '/' + label
        new_path1 = new_file_path + '/' + 'val' + '/' + 'labels'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + label
        shutil.copy(old_path, new_path)
 
    for image in test_images:
        old_path = file_path + '/' + image
        new_path1 = new_file_path + '/' + 'test' + '/' + 'images'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + image
        shutil.copy(old_path, new_path)
 
    for label in test_labels:
        old_path = xml_path + '/' + label
        new_path1 = new_file_path + '/' + 'test' + '/' + 'labels'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + label
        shutil.copy(old_path, new_path)
```

**ç¬¬ 5 æ­¥ï¼šè®¾ç½®è·¯å¾„å¹¶è®¾ç½®åˆ’åˆ†æ¯”ä¾‹**

è¿™é‡Œè¦è®¾ç½®çš„æœ‰ä¸‰ä¸ªï¼š

*   **file_pathï¼š**å›¾ç‰‡æ‰€åœ¨ä½ç½®ï¼Œå°±æ˜¯ image æ–‡ä»¶å¤¹
*   **xml_pathï¼š**æ ‡ç­¾æ‰€åœ¨ä½ç½®ï¼Œå°±æ˜¯ Annotation æ–‡ä»¶å¤¹
*   **new_file_pathï¼š**åˆ’åˆ†åä¸‰ä¸ªæ–‡ä»¶çš„ä¿å­˜ä½ç½®ï¼Œå°±æ˜¯ ImageSets æ–‡ä»¶å¤¹

```
if __name__ == '__main__':
    file_path = "D:\yolov5-6.1\datasets\image"
    xml_path = "D:\yolov5-6.1\datasets\Annotation"
    new_file_path = "D:\yolov5-6.1\datasets\ImageSets"
    split_data(file_path,xml_path, new_file_path, train_rate=0.7, val_rate=0.1, test_rate=0.2)
```

æœ€åä¸€è¡Œæ˜¯è®¾ç½®åˆ’åˆ†æ¯”ä¾‹ï¼Œè¿™é‡Œçš„æ¯”ä¾‹åˆ†é…å¤§å®¶å¯ä»¥éšä¾¿åˆ’åˆ†ï¼Œæˆ‘é€‰å–çš„æ˜¯ 7:1:2ã€‚

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„æ•°æ®é›†å°±åˆ’åˆ†å¥½äº†ã€‚

æ¥è¿è¡Œä¸€ä¸‹çœ‹çœ‹æ•ˆæœå§ï¼š

![](https://img-blog.csdnimg.cn/236da729b2a1440f82deb473a2f67844.png)

![](https://img-blog.csdnimg.cn/40612253406c4c5e990765676ece6c22.png)

Â æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®é›†å›¾ç‰‡å’Œæ ‡ç­¾å·²ç»åˆ’åˆ†æˆäº† trainã€val å’Œ test ä¸‰ä¸ªæ–‡ä»¶å¤¹ã€‚

![](https://img-blog.csdnimg.cn/87689455b1d746deb05353d49be7293f.png)![](https://img-blog.csdnimg.cn/a35f0ad9acdb48b19a2e70de3fd81d5c.png)![](https://img-blog.csdnimg.cn/56d4b0ee50e54211b9840fc8b83ee35e.png)

Â æ¯”ä¾‹ä¹Ÿç¬¦åˆ 7:1:2

 **split.py å®Œæ•´ä»£ç **

```
import os
import shutil
import random
 
random.seed(0)
 
 
def split_data(file_path,xml_path, new_file_path, train_rate, val_rate, test_rate):
    each_class_image = []
    each_class_label = []
    for image in os.listdir(file_path):
        each_class_image.append(image)
    for label in os.listdir(xml_path):
        each_class_label.append(label)
    data=list(zip(each_class_image,each_class_label))
    total = len(each_class_image)
    random.shuffle(data)
    each_class_image,each_class_label=zip(*data)
    train_images = each_class_image[0:int(train_rate * total)]
    val_images = each_class_image[int(train_rate * total):int((train_rate + val_rate) * total)]
    test_images = each_class_image[int((train_rate + val_rate) * total):]
    train_labels = each_class_label[0:int(train_rate * total)]
    val_labels = each_class_label[int(train_rate * total):int((train_rate + val_rate) * total)]
    test_labels = each_class_label[int((train_rate + val_rate) * total):]
 
    for image in train_images:
        print(image)
        old_path = file_path + '/' + image
        new_path1 = new_file_path + '/' + 'train' + '/' + 'images'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + image
        shutil.copy(old_path, new_path)
 
    for label in train_labels:
        print(label)
        old_path = xml_path + '/' + label
        new_path1 = new_file_path + '/' + 'train' + '/' + 'labels'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + label
        shutil.copy(old_path, new_path)
 
    for image in val_images:
        old_path = file_path + '/' + image
        new_path1 = new_file_path + '/' + 'val' + '/' + 'images'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + image
        shutil.copy(old_path, new_path)
 
    for label in val_labels:
        old_path = xml_path + '/' + label
        new_path1 = new_file_path + '/' + 'val' + '/' + 'labels'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + label
        shutil.copy(old_path, new_path)
 
    for image in test_images:
        old_path = file_path + '/' + image
        new_path1 = new_file_path + '/' + 'test' + '/' + 'images'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + image
        shutil.copy(old_path, new_path)
 
    for label in test_labels:
        old_path = xml_path + '/' + label
        new_path1 = new_file_path + '/' + 'test' + '/' + 'labels'
        if not os.path.exists(new_path1):
            os.makedirs(new_path1)
        new_path = new_path1 + '/' + label
        shutil.copy(old_path, new_path)
 
 
if __name__ == '__main__':
    file_path = "D:\yolov5-6.1\datasets\image"
    xml_path = "D:\yolov5-6.1\datasets\Annotation"
    new_file_path = "D:\yolov5-6.1\datasets\ImageSets"
    split_data(file_path,xml_path, new_file_path, train_rate=0.7, val_rate=0.1, test_rate=0.2)
```

æœ¬æ–‡å‚è€ƒï¼š

[ä¸‰å¤©ç©è½¬ yoloâ€”â€”æ•°æ®é›†æ ¼å¼è½¬åŒ–åŠè®­ç»ƒé›†å’ŒéªŒè¯é›†åˆ’åˆ† - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/558476071 "ä¸‰å¤©ç©è½¬yoloâ€”â€”æ•°æ®é›†æ ¼å¼è½¬åŒ–åŠè®­ç»ƒé›†å’ŒéªŒè¯é›†åˆ’åˆ† - çŸ¥ä¹ (zhihu.com)")

[ã€yolov5ã€‘å°†æ ‡æ³¨å¥½çš„æ•°æ®é›†è¿›è¡Œåˆ’åˆ†ï¼ˆé™„å®Œæ•´å¯è¿è¡Œ python ä»£ç ï¼‰](https://blog.csdn.net/freezing_00/article/details/129097738?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168091987916800192298379%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=168091987916800192298379&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-129097738-null-null.142%5Ev82%5Ekoosearch_v1,201%5Ev4%5Eadd_ask,239%5Ev2%5Einsert_chatgpt&utm_term=yolo%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%92%E5%88%86&spm=1018.2226.3001.4187 "ã€yolov5ã€‘å°†æ ‡æ³¨å¥½çš„æ•°æ®é›†è¿›è¡Œåˆ’åˆ†ï¼ˆé™„å®Œæ•´å¯è¿è¡Œpythonä»£ç ï¼‰")

![](https://img-blog.csdnimg.cn/fc7661f3761c4748b8d251f4863810a2.gif)